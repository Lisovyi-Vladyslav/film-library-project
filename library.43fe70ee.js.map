{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,2FAOMC,EAAaC,SAASC,cAAc,mBACpCC,EAAWF,SAASC,cAAc,iBAElCE,EAA0B,QAC1BC,EAA0B,QAG1BC,EAAM,gCAENC,EAAsB,SAEtBC,EAAU,IAAIC,gBAAgB,CAClCC,QAJmB,mCAKnBC,SAAU,U,SAGGC,EAAsBC,G,OAAtBC,EAAAC,MAAAC,KAAAC,U,UAAAH,I,OAAAA,GAAf,EAAAhB,EAAAoB,UAAA,SAAqCL,G,iEAClB,O,EAAMM,EAAAD,QAAME,IAC3B,GAASC,OAANf,GAA4Be,OAAtBd,GAA4Bc,OAANR,EAAG,KAAWQ,OAARb,K,OAEvC,O,EAHiBc,EAAAC,OAGDC,M,GAClB,KALeT,MAAAC,KAAAC,U,UAOAQ,EAAyBC,G,OAAzBC,EAAAZ,MAAAC,KAAAC,U,UAAAU,I,OAAAA,GAAf,EAAA7B,EAAAoB,UAAA,SAAwCQ,G,IAChCE,E,iEAAW,O,EAAMF,EAAMG,KAAI,SAAAC,G,OAAQlB,EAAsBkB,E,YAChD,OADTF,EAAWN,EAAAC,OACF,C,EAAMQ,QAAQC,IAAIJ,I,cACjCK,EADeX,EAAAC,Q,OAEjB,KAJeR,MAAAC,KAAAC,U,CAuBf,SAASgB,EAAiBT,GACxB,IAAMU,EAASV,EACZK,KACC,SAAAM,GACEA,EAAAC,M,IACAvB,EAAAsB,EAAAtB,GACAwB,EAAAF,EAAAE,MAEAC,GADAH,EAAAI,cACAJ,EAAAG,QACAE,EAAAL,EAAAK,YACAC,EAAAN,EAAAM,aAEMC,EAAOJ,EAAOT,KAAI,SAAAa,G,OAAQA,EAAKC,I,IAAMC,KAAK,MAgBhD,MAfqB,iIAOJvB,OAJuBmB,EAAY,+FAMjBnB,OAFlBR,EAAG,4DAIuBQ,OAFRwB,SAASJ,GAAc,wGAGnBpB,OADIgB,EAAM,6DACLhB,OAALqB,EAAK,wCAI9C,IAEDE,KAAK,IACRE,EAAAC,KAAKC,qBAAqBC,UAAY,GACtCH,EAAAC,KAAKC,qBAAqBE,mBAAmB,YAAahB,EAC5D,CArCAlC,EAAWmD,iBAAiB,SAd5B,WAEE1B,EADgB2B,EAAAlC,QAAWmC,KAAKjD,IAA4B,MAE5DD,EAASmD,UAAUC,OAAO,cAC1BvD,EAAWsD,UAAUE,IAAI,aAC3B,IAUArD,EAASgD,iBAAiB,SAR1B,WACEhD,EAASmD,UAAUE,IAAI,cACvBxD,EAAWsD,UAAUC,OAAO,cAE5B9B,EADc2B,EAAAlC,QAAWmC,KAAKhD,IAA4B,KAE5D,IAiFAyC,EAAAC,KAAKC,qBAAqBG,iBAAiB,SAhC3C,SAA8BM,GAI5B,GAHAA,EAAEC,iBAGgB,QADAD,EAAEE,OAAOC,SAC3B,CAIA,IAAMC,EAAcJ,EAAEE,OAAOG,QAAQC,MAErCjB,EAAAC,KAAKiB,cAAcV,UAAUC,OAAO,gBACpCT,EAAAC,KAAKkB,QAAQX,UAAUC,OAAO,gBAE9BT,EAAAC,KAAKmB,eAAejB,UAAY,GAChCH,EAAAC,KAAKoB,qBAAqBlB,UAAY,GAnBtCrC,EAqBuBiD,GApBpBO,MAAK,SAAA5C,G,OAAQ,EAAA6C,EAAAnD,SAAkBM,E,IAC/B8C,OAAM,SAAAC,G,OAAOA,EAAIC,O,IA+BpB1B,EAAAC,KAAK0B,kBAAkBtB,iBAAiB,SAVxC,WAEE1B,EADc2B,EAAAlC,QAAWmC,KAAKjD,IAA4B,KAE5D,IAQA0C,EAAAC,KAAK2B,gBAAgBvB,iBAAiB,SANtC,WAEE1B,EADc2B,EAAAlC,QAAWmC,KAAKhD,IAA4B,KAE5D,GArBE,CAyBJ,IAMAoB,EADc2B,EAAAlC,QAAWmC,KAAKjD,IAA4B,K","sources":["src/library.js"],"sourcesContent":["import './scripts/modal';\nimport './scripts/buttons_themes';\nimport storageAPI from './scripts/storageAPI';\nimport { refs } from './scripts/refs';\nimport axios from 'axios';\nimport renderModalMarkup from './scripts/get_api/get_search_by_id';\n\nconst btnWatched = document.querySelector('.js-watched-btn');\nconst btnQueue = document.querySelector('.js-queue-btn');\n\nconst LOCAL_STORAGE_WATCH_KEY = 'watch';\nconst LOCAL_STORAGE_QUEUE_KEY = 'queue';\n// let searchId;\n\nconst URL = 'https://api.themoviedb.org/3/';\nconst MY_MOVIE_KEY = '388e7c1d810433186d944819803a330c';\nconst END_POINT_SEARCH_ID = 'movie/';\n\nconst options = new URLSearchParams({\n  api_key: MY_MOVIE_KEY,\n  language: 'en-US',\n});\n\nasync function getImagesTrendGallery(id) {\n  const response = await axios.get(\n    `${URL}${END_POINT_SEARCH_ID}${id}?${options}`\n  );\n  return response.data;\n}\n\nasync function renderByIdGalleryLibrary(array) {\n  const promises = await array.map(elem => getImagesTrendGallery(elem));\n  const result = await Promise.all(promises);\n  renderHtmlMurkup(result);\n}\n\nfunction handleWatchedBtnClick() {\n  const watched = storageAPI.load(LOCAL_STORAGE_WATCH_KEY) || '[]';\n  renderByIdGalleryLibrary(watched);\n  btnQueue.classList.remove('btn-active');\n  btnWatched.classList.add('btn-active');\n}\n\nfunction handleQueueBtnClick() {\n  btnQueue.classList.add('btn-active');\n  btnWatched.classList.remove('btn-active');\n  const queue = storageAPI.load(LOCAL_STORAGE_QUEUE_KEY) || '[]';\n  renderByIdGalleryLibrary(queue);\n}\n\nbtnWatched.addEventListener('click', handleWatchedBtnClick);\nbtnQueue.addEventListener('click', handleQueueBtnClick);\n\nfunction renderHtmlMurkup(data) {\n  const markup = data\n    .map(\n      ({\n        adult,\n        id,\n        title,\n        backdrop_path,\n        genres,\n        poster_path,\n        release_date,\n      }) => {\n        const genr = genres.map(genr => genr.name).join(', ');\n        const resultMarkup = `<li class=\"gallery__item\">\n        <img\n          class=\"gallery__item--img\"\n          src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n          alt=\"\"\n          loading=\"lazy\"\n          height=\"\"\n          data-img-id=\"${id}\"\n        />\n        <div class=\"gallery__item--data\">${parseInt(release_date)}</div>\n        <div class=\"gallery__item--list\">\n            <div class=\"gallery__item--title\"><b>${title}</b></div>\n            <div class=\"gallery__item-genre\">${genr}</div>\n            </div>\n    </li>`;\n        return resultMarkup;\n      }\n    )\n    .join('');\n  refs.galleryLibraryListEl.innerHTML = '';\n  refs.galleryLibraryListEl.insertAdjacentHTML('beforeend', markup);\n}\n\n//ллогіка для відкриття модалки\nfunction renderModalByIdGallery(id) {\n  debugger;\n  getImagesTrendGallery(id)\n    .then(data => renderModalMarkup(data))\n    .catch(err => err.message);\n}\n\nfunction handleClickOnImgCard(e) {\n  e.preventDefault();\n\n  const handClick = e.target.nodeName;\n  if (handClick !== 'IMG') {\n    return;\n  }\n\n  const searchIdImg = e.target.dataset.imgId;\n\n  refs.wraperModalEl.classList.remove('modal-hidden');\n  refs.modalEl.classList.remove('modal-hidden');\n\n  refs.imageWrapperEl.innerHTML = '';\n  refs.filmDetailsWrapperEl.innerHTML = '';\n\n  renderModalByIdGallery(searchIdImg);\n\n  function handleWatchClick() {\n    let watched = storageAPI.load(LOCAL_STORAGE_WATCH_KEY) || '[]';\n    renderByIdGalleryLibrary(watched);\n  }\n\n  function handleQueueClick() {\n    const queue = storageAPI.load(LOCAL_STORAGE_QUEUE_KEY) || '[]';\n    renderByIdGalleryLibrary(queue);\n  }\n\n  refs.btnModalWatchedEl.addEventListener('click', handleWatchClick);\n  refs.btnModalQueueEl.addEventListener('click', handleQueueClick);\n}\n\nrefs.galleryLibraryListEl.addEventListener('click', handleClickOnImgCard);\n\n//рендер початкової сторінки\nlet watched = storageAPI.load(LOCAL_STORAGE_WATCH_KEY) || '[]';\nrenderByIdGalleryLibrary(watched);\n"],"names":["$7pbsT","parcelRequire","$cecbdd76f2d3d4bd$var$btnWatched","document","querySelector","$cecbdd76f2d3d4bd$var$btnQueue","$cecbdd76f2d3d4bd$var$LOCAL_STORAGE_WATCH_KEY","$cecbdd76f2d3d4bd$var$LOCAL_STORAGE_QUEUE_KEY","$cecbdd76f2d3d4bd$var$URL","$cecbdd76f2d3d4bd$var$END_POINT_SEARCH_ID","$cecbdd76f2d3d4bd$var$options","URLSearchParams","api_key","language","$cecbdd76f2d3d4bd$var$getImagesTrendGallery","id","$cecbdd76f2d3d4bd$var$_getImagesTrendGallery","apply","this","arguments","default","$dIxxU","get","concat","_state","sent","data","$cecbdd76f2d3d4bd$var$renderByIdGalleryLibrary","array","$cecbdd76f2d3d4bd$var$_renderByIdGalleryLibrary","promises","map","elem","Promise","all","$cecbdd76f2d3d4bd$var$renderHtmlMurkup","markup","param","adult","title","genres","backdrop_path","poster_path","release_date","genr","name","join","parseInt","$7Sf3J","refs","galleryLibraryListEl","innerHTML","insertAdjacentHTML","addEventListener","$aIGuM","load","classList","remove","add","e","preventDefault","target","nodeName","searchIdImg","dataset","imgId","wraperModalEl","modalEl","imageWrapperEl","filmDetailsWrapperEl","then","$iGXxN","catch","err","message","btnModalWatchedEl","btnModalQueueEl"],"version":3,"file":"library.43fe70ee.js.map"}