{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,qHASA,IAAMC,EAAY,IAAI,EAAAC,EAAAC,wBAEhBC,EAAqB,CACzBC,WAAY,EACZC,aAAc,GACdC,aAAc,GACdC,aAAa,EACbC,KAAM,EACNC,SAAU,CACRD,KAAM,gDACNE,YACE,iEACFC,WACE,kHAGFC,mBACE,sIAGFC,WACE,4H,SAMSC,I,OAAAA,GAAf,EAAAhB,EAAAiB,UAAA,SAA8CP,EAAMQ,G,IAQ5CC,E,iEAPN,MAAc,KAAVD,IACF,EAAAE,EAAAC,gCAA+B,GAC/B,C,IAEmB,C,EAAMnB,EACxBoB,uBAAuBZ,EAAMQ,GAC7BK,MAAK,SAAAC,G,OAASnB,EAAmBC,WAAakB,EAAKC,a,mBAFjCC,EAAAC,OAGfR,EAAc,IAAIS,EAAAC,GAAJ,CAClBC,EAAAC,KAAKC,oBACL3B,GAEF4B,EAAoBvB,EAAMQ,GAC1BC,EAAYe,GAAG,cAAc,SAAAC,GAG3BF,EADoBE,EAAEzB,KACWQ,GACjCkB,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,UAEd,I,OACF,KAtBeC,MAAAC,KAAAC,U,UAwBAT,EAAoBvB,EAAMQ,G,OAA1ByB,EAAAH,MAAAC,KAAAC,U,UAAAC,I,OAAAA,GAAf,EAAA3C,EAAAiB,UAAA,SAAmCP,EAAMQ,G,iEAClB,O,EAAMhB,EACxBoB,uBAAuBZ,EAAMQ,GAC7BK,MAAK,SAAAC,GACJ,IAAKA,EAAKC,cAKR,OAJAmB,EAAAC,OAAOC,QACL,kFAEF,EAAA1B,EAAA2B,oBAAmB,IAGrB,EAAAC,EAAA/B,SAAiBO,EACnB,IACCyB,OAAM,SAAAC,G,OAAOA,EAAIC,O,mBAZCzB,EAAAC,O,OAavB,KAdea,MAAAC,KAAAC,U,CAqBfZ,EAAAC,KAAKqB,SAASC,iBAAiB,UAL/B,SAA0BC,GACxBA,EAAMC,iB,SAzCsC7C,EAAMQ,GAArCF,EAAAwB,MAAAC,KAAAC,U,CA2Cbc,CAA+B,EADjBF,EAAMG,OAAOC,SAASC,YAAYC,MAAMC,OAExD,G","sources":["src/scripts/render_markup/header_search.js"],"sourcesContent":["import { renderTrendGallery } from '../gallery';\nimport { fullTrendFilmsRequestandRender } from '../gallery';\nimport renderHtmlMurkup from './base_card_gallery';\nimport Pagination from 'tui-pagination';\nimport { Notify } from 'notiflix';\nimport { ApiImagesSearchRequest } from '../get_api/get_searchApi.js';\nimport { refs } from '../refs';\nimport storageAPI from '../storageAPI';\n\nconst searchAPI = new ApiImagesSearchRequest();\n\nconst paginationSettings = {\n  totalItems: 0,\n  itemsPerPage: 21,\n  visiblePages: 10,\n  centerAlign: true,\n  page: 1,\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}} custom-class-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">â˜€</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}} custom-class-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip custom-class-{{type}}\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nasync function fullSearchedFilmsRequestRender(page, query) {\n  if (query === '') {\n    fullTrendFilmsRequestandRender(1);\n    return;\n  }\n  const filmResponse = await searchAPI\n    .getImagesSearchGallery(page, query)\n    .then(data => (paginationSettings.totalItems = data.total_results));\n  const pagination2 = new Pagination(\n    refs.paginationContainer,\n    paginationSettings\n  );\n  renderSearchedFilms(page, query);\n  pagination2.on('beforeMove', e => {\n    // console.log(e.page);\n    const currentPage = e.page;\n    renderSearchedFilms(currentPage, query);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n  });\n}\n\nasync function renderSearchedFilms(page, query) {\n  const filmResponse = await searchAPI\n    .getImagesSearchGallery(page, query)\n    .then(data => {\n      if (!data.total_results) {\n        Notify.failure(\n          'Sorry, there are no films matching your search query.Popular films shown.'\n        );\n        renderTrendGallery(1);\n        return;\n      }\n      renderHtmlMurkup(data);\n    })\n    .catch(err => err.message);\n}\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n  const query = event.target.elements.searchQuery.value.trim();\n  fullSearchedFilmsRequestRender(1, query);\n}\nrefs.formElem.addEventListener('submit', handleFormSubmit);\n"],"names":["$7pbsT","parcelRequire","$71838e766ffdd502$var$searchAPI","$9CIzh","ApiImagesSearchRequest","$71838e766ffdd502$var$paginationSettings","totalItems","itemsPerPage","visiblePages","centerAlign","page","template","currentPage","moveButton","disabledMoveButton","moreButton","$71838e766ffdd502$var$_fullSearchedFilmsRequestRender","default","query","pagination2","$6nH8Q","fullTrendFilmsRequestandRender","getImagesSearchGallery","then","data","total_results","_state","sent","$parcel$interopDefault","$1VFfL","$7Sf3J","refs","paginationContainer","$71838e766ffdd502$var$renderSearchedFilms","on","e","window","scrollTo","top","behavior","apply","this","arguments","$71838e766ffdd502$var$_renderSearchedFilms","$iU1Pc","Notify","failure","renderTrendGallery","$HnSCr","catch","err","message","formElem","addEventListener","event","preventDefault","$71838e766ffdd502$var$fullSearchedFilmsRequestRender","target","elements","searchQuery","value","trim"],"version":3,"file":"index.3c362567.js.map"}