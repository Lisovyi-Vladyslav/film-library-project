{"mappings":"oeAAAA,EAAA,S,mEAOA,MAAMC,EAAaC,SAASC,cAAc,mBACpCC,EAAWF,SAASC,cAAc,iBAUlCE,EAAU,IAAIC,gBAAgB,CAClCC,QAJmB,mCAKnBC,SAAU,UAGZC,eAAeC,EAAsBC,GAInC,aAHuBC,EAAAC,QAAMC,IAC3B,sCAA+BH,KAAMN,MAEvBU,IAClB,CAEAN,eAAeO,EAAyBC,GACtC,MAAMC,QAAiBD,EAAME,KAAIC,GAAQV,EAAsBU,MAsBjE,SAA0BL,GACxB,MAAMM,EAASN,EACZI,KACC,EAACG,MACCA,EAAKX,GACLA,EAAEY,MACFA,EAAKC,cACLA,EAAaC,OACbA,EAAMC,YACNA,EAAWC,aACXA,MAEA,MAAMC,EAAOH,EAAON,KAAIS,GAAQA,EAAKC,OAAMC,KAAK,MAgBhD,MAfqB,iIAGmBJ,+FAIvBf,4DAEkBoB,SAASJ,yGAEDJ,6DACJK,wCAGhC,IAGVE,KAAK,IACRE,EAAAC,KAAKC,qBAAqBC,UAAY,GACtCH,EAAAC,KAAKC,qBAAqBE,mBAAmB,YAAaf,EAC5D,CAtDEgB,OADqBC,QAAQC,IAAIrB,GAEnC,CAgBAjB,EAAWuC,iBAAiB,SAd5B,WAEExB,EADgByB,EAAA5B,QAAW6B,KA3BG,UA2B8B,MAE5DtC,EAASuC,UAAUC,OAAO,cAC1B3C,EAAW0C,UAAUE,IAAI,aAC3B,IAUAzC,EAASoC,iBAAiB,SAR1B,WACEpC,EAASuC,UAAUE,IAAI,cACvB5C,EAAW0C,UAAUC,OAAO,cAE5B5B,EADcyB,EAAA5B,QAAW6B,KAnCK,UAmC4B,KAE5D,IAgFAV,EAAAC,KAAKC,qBAAqBM,iBAAiB,SAhC3C,SAA8BM,GAI5B,GAHAA,EAAEC,iBAGgB,QADAD,EAAEE,OAAOC,SAEzB,OAGF,MAAMC,EAAcJ,EAAEE,OAAOG,QAAQC,MAErCpB,EAAAC,KAAKoB,cAAcV,UAAUC,OAAO,gBACpCZ,EAAAC,KAAKqB,QAAQX,UAAUC,OAAO,gBAE9BZ,EAAAC,KAAKsB,eAAepB,UAAY,GAChCH,EAAAC,KAAKuB,qBAAqBrB,UAAY,GAnBtCzB,EAqBuBwC,GApBpBO,MAAK1C,IAAQ,EAAA2C,EAAA7C,SAAkBE,KAC/B4C,OAAMC,GAAOA,EAAIC,UA+BpB7B,EAAAC,KAAK6B,kBAAkBtB,iBAAiB,SAVxC,WAEExB,EADcyB,EAAA5B,QAAW6B,KAzGG,UAyG8B,KAE5D,IAQAV,EAAAC,KAAK8B,gBAAgBvB,iBAAiB,SANtC,WAEExB,EADcyB,EAAA5B,QAAW6B,KA7GG,UA6G8B,KAE5D,GAIF,IAMA1B,EADcyB,EAAA5B,QAAW6B,KAzHO,UAyH0B","sources":["src/library.js"],"sourcesContent":["import './scripts/modal';\nimport './scripts/buttons_themes';\nimport storageAPI from './scripts/storageAPI';\nimport { refs } from './scripts/refs';\nimport axios from 'axios';\nimport renderModalMarkup from './scripts/get_api/get_search_by_id';\n\nconst btnWatched = document.querySelector('.js-watched-btn');\nconst btnQueue = document.querySelector('.js-queue-btn');\n\nconst LOCAL_STORAGE_WATCH_KEY = 'watch';\nconst LOCAL_STORAGE_QUEUE_KEY = 'queue';\n// let searchId;\n\nconst URL = 'https://api.themoviedb.org/3/';\nconst MY_MOVIE_KEY = '388e7c1d810433186d944819803a330c';\nconst END_POINT_SEARCH_ID = 'movie/';\n\nconst options = new URLSearchParams({\n  api_key: MY_MOVIE_KEY,\n  language: 'en-US',\n});\n\nasync function getImagesTrendGallery(id) {\n  const response = await axios.get(\n    `${URL}${END_POINT_SEARCH_ID}${id}?${options}`\n  );\n  return response.data;\n}\n\nasync function renderByIdGalleryLibrary(array) {\n  const promises = await array.map(elem => getImagesTrendGallery(elem));\n  const result = await Promise.all(promises);\n  renderHtmlMurkup(result);\n}\n\nfunction handleWatchedBtnClick() {\n  const watched = storageAPI.load(LOCAL_STORAGE_WATCH_KEY) || '[]';\n  renderByIdGalleryLibrary(watched);\n  btnQueue.classList.remove('btn-active');\n  btnWatched.classList.add('btn-active');\n}\n\nfunction handleQueueBtnClick() {\n  btnQueue.classList.add('btn-active');\n  btnWatched.classList.remove('btn-active');\n  const queue = storageAPI.load(LOCAL_STORAGE_QUEUE_KEY) || '[]';\n  renderByIdGalleryLibrary(queue);\n}\n\nbtnWatched.addEventListener('click', handleWatchedBtnClick);\nbtnQueue.addEventListener('click', handleQueueBtnClick);\n\nfunction renderHtmlMurkup(data) {\n  const markup = data\n    .map(\n      ({\n        adult,\n        id,\n        title,\n        backdrop_path,\n        genres,\n        poster_path,\n        release_date,\n      }) => {\n        const genr = genres.map(genr => genr.name).join(', ');\n        const resultMarkup = `<li class=\"gallery__item\">\n        <img\n          class=\"gallery__item--img\"\n          src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n          alt=\"\"\n          loading=\"lazy\"\n          height=\"\"\n          data-img-id=\"${id}\"\n        />\n        <div class=\"gallery__item--data\">${parseInt(release_date)}</div>\n        <div class=\"gallery__item--list\">\n            <div class=\"gallery__item--title\"><b>${title}</b></div>\n            <div class=\"gallery__item-genre\">${genr}</div>\n            </div>\n    </li>`;\n        return resultMarkup;\n      }\n    )\n    .join('');\n  refs.galleryLibraryListEl.innerHTML = '';\n  refs.galleryLibraryListEl.insertAdjacentHTML('beforeend', markup);\n}\n\n//ллогіка для відкриття модалки\nfunction renderModalByIdGallery(id) {\n  getImagesTrendGallery(id)\n    .then(data => renderModalMarkup(data))\n    .catch(err => err.message);\n}\n\nfunction handleClickOnImgCard(e) {\n  e.preventDefault();\n\n  const handClick = e.target.nodeName;\n  if (handClick !== 'IMG') {\n    return;\n  }\n\n  const searchIdImg = e.target.dataset.imgId;\n\n  refs.wraperModalEl.classList.remove('modal-hidden');\n  refs.modalEl.classList.remove('modal-hidden');\n\n  refs.imageWrapperEl.innerHTML = '';\n  refs.filmDetailsWrapperEl.innerHTML = '';\n\n  renderModalByIdGallery(searchIdImg);\n\n  function handleWatchClick() {\n    let watched = storageAPI.load(LOCAL_STORAGE_WATCH_KEY) || '[]';\n    renderByIdGalleryLibrary(watched);\n  }\n\n  function handleQueueClick() {\n    const queue = storageAPI.load(LOCAL_STORAGE_QUEUE_KEY) || '[]';\n    renderByIdGalleryLibrary(queue);\n  }\n\n  refs.btnModalWatchedEl.addEventListener('click', handleWatchClick);\n  refs.btnModalQueueEl.addEventListener('click', handleQueueClick);\n}\n\nrefs.galleryLibraryListEl.addEventListener('click', handleClickOnImgCard);\n\n//рендер початкової сторінки\nlet watched = storageAPI.load(LOCAL_STORAGE_WATCH_KEY) || '[]';\nrenderByIdGalleryLibrary(watched);\n"],"names":["parcelRequire","$f7c7151f14e90fc2$var$btnWatched","document","querySelector","$f7c7151f14e90fc2$var$btnQueue","$f7c7151f14e90fc2$var$options","URLSearchParams","api_key","language","async","$f7c7151f14e90fc2$var$getImagesTrendGallery","id","$fmRoT","default","get","data","$f7c7151f14e90fc2$var$renderByIdGalleryLibrary","array","promises","map","elem","markup","adult","title","backdrop_path","genres","poster_path","release_date","genr","name","join","parseInt","$eIXe9","refs","galleryLibraryListEl","innerHTML","insertAdjacentHTML","$f7c7151f14e90fc2$var$renderHtmlMurkup","Promise","all","addEventListener","$ky5oN","load","classList","remove","add","e","preventDefault","target","nodeName","searchIdImg","dataset","imgId","wraperModalEl","modalEl","imageWrapperEl","filmDetailsWrapperEl","then","$qh4Og","catch","err","message","btnModalWatchedEl","btnModalQueueEl"],"version":3,"file":"library.74131c5e.js.map"}