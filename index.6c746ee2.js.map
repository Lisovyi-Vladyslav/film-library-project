{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,2FASA,MAAMC,EAAY,IAAI,EAAAC,EAAAC,wBAEhBC,EAAqB,CACzBC,WAAY,EACZC,aAAc,GACdC,aAAc,GACdC,aAAa,EACbC,KAAM,EACNC,SAAU,CACRD,KAAM,gDACNE,YACE,iEACFC,WACE,kHAGFC,mBACE,sIAGFC,WACE,4HA8BNC,eAAeC,EAAoBP,EAAMQ,SACZhB,EACxBiB,uBAAuBT,EAAMQ,GAC7BE,MAAKC,IACJ,IAAKA,EAAKC,cAKR,OAJAC,EAAAC,OAAOC,QACL,kFAEF,EAAAzB,EAAA0B,oBAAmB,IAGrB,EAAAC,EAAAC,SAAiBP,EAAA,IAElBQ,OAAMC,GAAOA,EAAIC,SACtB,CAOAC,EAAAC,KAAKC,SAASC,iBAAiB,UAL/B,SAA0BC,GACxBA,EAAMC,iBAzCRrB,eAA8CN,EAAMQ,GAClD,GAAc,KAAVA,EAEF,YADA,EAAAlB,EAAAsC,gCAA+B,SAGNpC,EACxBiB,uBAAuBT,EAAMQ,GAC7BE,MAAKC,GAAShB,EAAmBC,WAAae,EAAKC,gBAFtD,MAGMiB,EAAc,IAAIC,EAAAC,GAAJ,CAClBT,EAAAC,KAAKS,oBACLrC,GAEFY,EAAoBP,EAAMQ,GAC1BqB,EAAYI,GAAG,cAAcC,IAG3B3B,EADoB2B,EAAElC,KACWQ,GACjC2B,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,UACZ,GAEJ,CAqBEC,CAA+B,EADjBb,EAAMc,OAAOC,SAASC,YAAYC,MAAMC,OAExD","sources":["src/scripts/render_markup/header_search.js"],"sourcesContent":["import { renderTrendGallery } from '../gallery';\nimport { fullTrendFilmsRequestandRender } from '../gallery';\nimport renderHtmlMurkup from './base_card_gallery';\nimport Pagination from 'tui-pagination';\nimport { Notify } from 'notiflix';\nimport { ApiImagesSearchRequest } from '../get_api/get_searchApi.js';\nimport { refs } from '../refs';\nimport storageAPI from '../storageAPI';\n\nconst searchAPI = new ApiImagesSearchRequest();\n\nconst paginationSettings = {\n  totalItems: 0,\n  itemsPerPage: 21,\n  visiblePages: 10,\n  centerAlign: true,\n  page: 1,\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}} custom-class-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">â˜€</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}} custom-class-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip custom-class-{{type}}\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nasync function fullSearchedFilmsRequestRender(page, query) {\n  if (query === '') {\n    fullTrendFilmsRequestandRender(1);\n    return;\n  }\n  const filmResponse = await searchAPI\n    .getImagesSearchGallery(page, query)\n    .then(data => (paginationSettings.totalItems = data.total_results));\n  const pagination2 = new Pagination(\n    refs.paginationContainer,\n    paginationSettings\n  );\n  renderSearchedFilms(page, query);\n  pagination2.on('beforeMove', e => {\n    // console.log(e.page);\n    const currentPage = e.page;\n    renderSearchedFilms(currentPage, query);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n  });\n}\n\nasync function renderSearchedFilms(page, query) {\n  const filmResponse = await searchAPI\n    .getImagesSearchGallery(page, query)\n    .then(data => {\n      if (!data.total_results) {\n        Notify.failure(\n          'Sorry, there are no films matching your search query.Popular films shown.'\n        );\n        renderTrendGallery(1);\n        return;\n      }\n      renderHtmlMurkup(data);\n    })\n    .catch(err => err.message);\n}\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n  const query = event.target.elements.searchQuery.value.trim();\n  fullSearchedFilmsRequestRender(1, query);\n}\nrefs.formElem.addEventListener('submit', handleFormSubmit);\n"],"names":["$lYEnK","parcelRequire","$33205d1c447a51fc$var$searchAPI","$eis3B","ApiImagesSearchRequest","$33205d1c447a51fc$var$paginationSettings","totalItems","itemsPerPage","visiblePages","centerAlign","page","template","currentPage","moveButton","disabledMoveButton","moreButton","async","$33205d1c447a51fc$var$renderSearchedFilms","query","getImagesSearchGallery","then","data","total_results","$4vA6L","Notify","failure","renderTrendGallery","$gVR61","default","catch","err","message","$eIXe9","refs","formElem","addEventListener","event","preventDefault","fullTrendFilmsRequestandRender","pagination2","$parcel$interopDefault","$9B81a","paginationContainer","on","e","window","scrollTo","top","behavior","$33205d1c447a51fc$var$fullSearchedFilmsRequestRender","target","elements","searchQuery","value","trim"],"version":3,"file":"index.6c746ee2.js.map"}